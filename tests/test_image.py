# third-party
import numpy as np
from scipy.stats import multivariate_normal

# local
from motley.image import AnsiImage
from motley.textbox import TextBox

from loguru import logger

from recipes.testing import Expected, mock
# logger.enable('motley')

# r = np.random.randint(0, 256, (10, 10))
# # im = AnsiImage(r, frame=True).render()


# im = BinaryImage(r >= 128).render()
import pytest

# ---------------------------------------------------------------------------- #
def make_gaussian_image(size=(10, 10)):
    # 2D Gaussian
    mu = (0, 0)
    covm = np.array([[0.5,  1.2],
                     [0.6,  1.2]])
    rv = multivariate_normal(mu, covm)
    r, c = size
    Y, X = np.mgrid[-3:3:r * 1j, -3:3:c * 1j]
    grid = np.array([X, Y])
    return rv.pdf(grid.transpose(1, 2, 0)).T

@pytest.fixture(scope='module')
def gaussian2d():
    return make_gaussian_image()


def display_with_overlay(frame, **kws):
    gaussian2d = make_gaussian_image()
    img = AnsiImage(gaussian2d)
    img.overlay(gaussian2d > 0.01, 'red')
    return img.format(frame=frame, **kws)
    # return TextBox(left='‚î§', right='‚îú')(result)

    #img.pixels = overlay(Zg > 0.01, img.pixels[::-1])[::-1].astype(str)
    # assert(
    #     img.format(frame=True) ==
        

test_display = Expected(display_with_overlay)({
    mock(frame=''):
    '\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;2;85m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;70;9;92;4;31m  \x1b[0m\x1b[31;48;2;71;22;105m‚ñè \x1b[0m\x1b[31;48;2;71;22;105m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[31;48;2;70;14;97m‚ñè \x1b[0m\x1b[;48;2;66;64;133m  \x1b[0m\x1b[;48;2;42;119;142m  \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;71;38;118;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;5;88;4;31m  \x1b[0m\x1b[31;48;2;70;45;124m‚ñè \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;66;64;133;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;8;91m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;8;91;4;31m  \x1b[0m\x1b[31;48;2;66;64;133m‚ñè \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;70;45;124;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;69;5;88m  \x1b[0m\x1b[31;48;2;71;38;118m‚ñè \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;42;119;142;4;31m  \x1b[0m\x1b[;48;2;66;64;133;4;31m  \x1b[0m\x1b[;48;2;70;14;97;4;31m ‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;71;22;105;4;31m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;68;2;85m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\n',
    mock(frame='_'):
        '\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\x1b[;4m  \x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;2;85m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;70;9;92;4;31m  \x1b[0m\x1b[31;48;2;71;22;105m‚ñè \x1b[0m\x1b[31;48;2;71;22;105m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[31;48;2;70;14;97m‚ñè \x1b[0m\x1b[;48;2;66;64;133m  \x1b[0m\x1b[;48;2;42;119;142m  \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;71;38;118;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;5;88;4;31m  \x1b[0m\x1b[31;48;2;70;45;124m‚ñè \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;66;64;133;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;8;91m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84m‚ñè \x1b[0m\x1b[;48;2;69;8;91;4;31m  \x1b[0m\x1b[31;48;2;66;64;133m‚ñè \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;70;45;124;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;69;5;88m‚ñè \x1b[0m\x1b[31;48;2;71;38;118m‚ñè \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;42;119;142;4;31m  \x1b[0m\x1b[;48;2;66;64;133;4;31m  \x1b[0m\x1b[;48;2;70;14;97;4;31m ‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;70;9;92m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;68;2;85m‚ñè \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m ‚ñï\x1b[0m\n\x1b[;48;2;68;1;84;4m‚ñè \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m ‚ñï\x1b[0m\n',
    mock(frame='-'):
        '‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;2;85m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;70;9;92;4;31m  \x1b[0m\x1b[31;48;2;71;22;105m‚ñè \x1b[0m\x1b[31;48;2;71;22;105m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[31;48;2;70;14;97m‚ñè \x1b[0m\x1b[;48;2;66;64;133m  \x1b[0m\x1b[;48;2;42;119;142m  \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;71;38;118;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;5;88;4;31m  \x1b[0m\x1b[31;48;2;70;45;124m‚ñè \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;66;64;133;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;8;91m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;8;91;4;31m  \x1b[0m\x1b[31;48;2;66;64;133m‚ñè \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;70;45;124;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;69;5;88m  \x1b[0m\x1b[31;48;2;71;38;118m‚ñè \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;42;119;142;4;31m  \x1b[0m\x1b[;48;2;66;64;133;4;31m  \x1b[0m\x1b[;48;2;70;14;97;4;31m ‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;71;22;105;4;31m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;2;85m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚îÇ\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚îÇ\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ',
    mock(frame='='):
        '‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;2;85m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;70;9;92;4;31m  \x1b[0m\x1b[31;48;2;71;22;105m‚ñè \x1b[0m\x1b[31;48;2;71;22;105m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[31;48;2;70;14;97m‚ñè \x1b[0m\x1b[;48;2;66;64;133m  \x1b[0m\x1b[;48;2;42;119;142m  \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;71;38;118;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;5;88;4;31m  \x1b[0m\x1b[31;48;2;70;45;124m‚ñè \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;66;64;133;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;8;91m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;8;91;4;31m  \x1b[0m\x1b[31;48;2;66;64;133m‚ñè \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;70;45;124;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;69;5;88m  \x1b[0m\x1b[31;48;2;71;38;118m‚ñè \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;42;119;142;4;31m  \x1b[0m\x1b[;48;2;66;64;133;4;31m  \x1b[0m\x1b[;48;2;70;14;97;4;31m ‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;71;22;105;4;31m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;2;85m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïë\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m‚ïë\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù',
    mock(frame='+'):
        '\x1b[;4m ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;2;85m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[;48;2;70;9;92;4;31m  \x1b[0m\x1b[31;48;2;71;22;105m‚ñè \x1b[0m\x1b[31;48;2;71;22;105m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84;4;31m  \x1b[0m\x1b[31;48;2;70;14;97m‚ñè \x1b[0m\x1b[;48;2;66;64;133m  \x1b[0m\x1b[;48;2;42;119;142m  \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;71;38;118;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;5;88;4;31m  \x1b[0m\x1b[31;48;2;70;45;124m‚ñè \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;66;64;133;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;8;91m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;69;8;91;4;31m  \x1b[0m\x1b[31;48;2;66;64;133m‚ñè \x1b[0m\x1b[;48;2;62;188;115m  \x1b[0m\x1b[;48;2;253;231;36m  \x1b[0m\x1b[;48;2;31;161;135m  \x1b[0m\x1b[;48;2;70;45;124;4;31m ‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;69;5;88m  \x1b[0m\x1b[31;48;2;71;38;118m‚ñè \x1b[0m\x1b[;48;2;49;102;141m  \x1b[0m\x1b[;48;2;42;119;142;4;31m  \x1b[0m\x1b[;48;2;66;64;133;4;31m  \x1b[0m\x1b[;48;2;70;14;97;4;31m ‚ñï\x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;71;22;105;4;31m‚ñè \x1b[0m\x1b[;48;2;71;22;105;4;31m ‚ñï\x1b[0m\x1b[;48;2;70;9;92m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4m‚ñï\x1b[0m\x1b[;48;2;68;2;85m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;48;2;68;1;84m  \x1b[0m\x1b[;4m‚ñè\x1b[0m\n\x1b[;4;4m‚ñï\x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;48;2;68;1;84;4m  \x1b[0m\x1b[;4;4m‚ñè\x1b[0m\n ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ ùáÅ'
})

# logger.enable('motley')

if __name__ == "__main__":
    #  
    for frame in ('', '_', '-', '=', '+',):
        print(frame * 80)
        
        img = display_with_overlay(frame)
        print(img)
        print(repr(img))
        print('*' * 80)